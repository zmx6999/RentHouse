syntax = "proto3";

package go.micro.srv.user;

service Example {
	rpc GenerateId(GenerateIdRequest) returns (GenerateIdResponse) {}
	rpc Captcha(CaptchaRequest) returns (CaptchaResponse) {}
	rpc SmsCaptcha(SmsCaptchaRequest) returns (SmsCaptchaResponse) {}
	rpc Register(RegisterRequest) returns (RegisterResponse) {}
	rpc GetInfo(GetInfoRequest) returns (GetInfoResponse) {}
	rpc Avatar(AvatarRequest) returns (AvatarResponse) {}
	rpc Rename(RenameRequest) returns (RenameResponse) {}
	rpc Auth(AuthRequest) returns (AuthResponse) {}
}

message Message {
	string say = 1;
}

message GenerateIdRequest {

}

message GenerateIdResponse {
	string Code = 1;
	string Msg = 2;
	bytes UserId = 3;
}

message CaptchaRequest {
	string UserId = 1;
}

message CaptchaResponse {
	message Point {
		int64 X = 1;
		int64 Y = 2;
	}
	Point Max = 1;
	Point Min = 2;
	bytes Pix = 3;
	int64 Stride = 4;
}

message SmsCaptchaRequest {
	string UserId = 1;
	string Mobile = 2;
	string Captcha = 3;
}

message SmsCaptchaResponse {
	string Code = 1;
	string Msg = 2;
}

message RegisterRequest {
	string UserId = 1;
	string Mobile = 2;
	string SmsCaptcha = 3;
}

message RegisterResponse {
	string Code = 1;
	string Msg = 2;
	string UserId = 3;
	string Mobile = 4;
	string PrivateKey = 5;
	string PublicKey = 6;
}

message GetInfoRequest {
	string Mobile = 1;
}

message GetInfoResponse {
	string Code = 1;
	string Msg = 2;
	bytes Data = 3;
}

message AvatarRequest {
	string Mobile = 1;
	bytes Data = 2;
	string FileName = 3;
	int64 FileSize = 4;
}

message AvatarResponse {
	string Code = 1;
	string Msg = 2;
}

message RenameRequest {
	string Mobile = 1;
	string NewName = 2;
}

message RenameResponse {
	string Code = 1;
	string Msg = 2;
}

message AuthRequest {
	string Mobile = 1;
	string RealName = 2;
	string IdCard = 3;
}

message AuthResponse {
	string Code = 1;
	string Msg = 2;
}
